半导体读写存储器简称RWM (Read Write Memory)，习惯上也称为RAM (Random Access Memory)。半导体RAM具有体积小、存取速度快等优点，适合作为内部存储器使用。按工艺不同可分为**双极型RAM和MOS型RAM**两大类，MOS型RAM又分为**静态RAM** (Static RAM, SRAM) 和**动态RAM** (Dynamic RAM, DRAM)。
**4.2.1 基本存储元件**
基本存储元件用来存储一位二进制信息，是组成存储器的最基本电路。
1.  **六管静态MOS管存储元件**
	 ![[image-148.png]]
    *   **构成**：如图4.3所示，由6个MOS管组成。T₁和T₂构成触发器（存储核心），T₅和T₆是触发器的负载管，T₃和T₄为门控管（访问控制）。
    *   **状态定义**：
        *   存“1”：若T₂管导通，则T₁管截止，此时A点为高电平，B点为低电平。
        *   存“0”：若T₁管导通，则T₂管截止，此时B点为高电平，A点为低电平。
    *   **信息保持**：字选择线W加低电平，T₃与T₄截止，触发器与外界隔离，保持原有信息不变。
    *   **读出**：
        1.  两条位线D0和D1预先加高电平。
        2.  字选择线W加高电平，T₃与T₄开启。
        3.  若原存“0”（B点高电平，T₁导通），电流从位线D0经T₃、T₁到地，位线D0产生负脉冲。位线D1无负脉冲。
        4.  若原存“1”（A点高电平，T₂导通），电流从位线D1经T₄、T₂到地，位线D1产生负脉冲。位线D0无负脉冲。
        5.  根据哪条位线有负脉冲可区分读出的是“0”还是“1”。
    *   **写入**：
        1.  字选择线W加高电平，T₃与T₄开启。
        2.  写“1”：在位线D1上加低电平，使B点电位下降，T₁管截止，A点电位上升，使T₂管导通。
        3.  写“0”：在位线D0上加低电平，使A点电位下降，T₂管截止，B点电位上升，使T₁管导通。
    *   **功耗**：即使在保持状态，由于T₅→T₁或T₆→T₂总有一路导通，存在静态功耗，因此功耗较大。

2.  **单管动态MOS管存储元件**
	  ![[image-149.png]]
    *   **原理**：利用MOS管的栅极电容Cs来存储信息。
    *   **构成**：如图4.4所示，T管为字选门控管，Cs为存储电容。
    *   **读出**：
        1.  字选择线W加选通脉冲使T管导通。
        2.  若原存“1”（Cs上有电荷），Cs上电荷通过T管在数据线（位线）上产生电流。
        3.  若原存“0”（Cs上无电荷），则无电流。
        4.  **破坏性读出**：读出时Cs上电荷放电，电位下降，信息丢失，读后应有重写操作（称为“再生”）。
        5.  由于Cs容量小，且存在寄生电容Ca，读出电流值非常小，对读出放大器要求高。
    *   **写入**：
        1.  字选择线W加选通脉冲使T管导通。
        2.  写“1”：在数据线上加高电平，经T管对Cs充电。
        3.  写“0”：在数据线上加低电平，Cs通过T管充分放电使其上无电荷。
    *   **刷新 (Refresh)**：MOS管栅极上存储的电荷会缓慢放电，超过一定时间会丢失信息。因此必须定时给栅极电容充电，此过程称为“刷新”。
    *   **功耗**：在信息保持状态下，存储元件中没有电流流动，功耗大大降低。
3.  **静态存储元件和动态存储元件的比较**
    *   **SRAM (静态)**：
        *   MOS管多，占硅片面积大，功耗大，集成度低。
        *   采用正负反馈触发器电路存储信息，只要直流供电，就能保持状态，无需刷新。
        *   读操作一般不破坏信息（非破坏性读出，但某些具体电路实现可能仍需内部恢复），无需读后再生。
        *   读写速度快。
        *   价格较昂贵。
        *   用途：高速小容量半导体存储器，如Cache。
    *   **DRAM (动态)**：
        *   MOS管少，占硅片面积小，功耗小，集成度高。
        *   采用电容存储电荷来存储信息，会发生漏电，必须定时刷新。
        *   读操作破坏信息（破坏性读出），需读后再生。
        *   读写速度相对SRAM慢。
        *   价格较低。
        *   用途：慢速大容量半导体存储器，如主存。
---
**4.2.2 静态RAM芯片 (SRAM)**

4.  **SRAM芯片结构**
      ![[image-150.png]]
    *   **组成部分**：由存储体（存储矩阵）、I/O读写电路、地址译码器和控制电路等组成（如图4.5）。
    *   **(1) 存储体 (存储矩阵)**：存储单元的集合。
        *   例如：4096个存储单元排成64x64的存储阵列（位平面），8个这样的位平面构成4096字节的存储体。
        *   通过X选择线（行选择线）和Y选择线（列选择线）来选择所需单元。
    *   **(2) 地址译码器**：将地址转换为译码输出线上的高电平，驱动相应读写电路。
        *   **一维译码 (线选法/单译码法)**：适用于小容量存储器。只有一个行译码器，选中一行中的各单元构成一个字，同时读出或写入。这种芯片称为字片式芯片。
        *   **二维译码 (重合法/双译码法)**：适用于容量较大的存储器。地址译码器分为X和Y方向两个译码器。这种芯片称为位片式芯片（选中行列交叉点的一位）。有些芯片采用三维结构（多个位平面）。
	        * ![[image-152.png]]
    *   **(3) 驱动器**：在双译码结构中，X方向选择线负载较大，译码器输出后需加驱动器。
    *   **(4) I/O控制电路**：控制被选中单元的读出或写入，具有放大信息的作用。
    *   **(5) 片选控制信号 (CS - Chip Select)**：单个芯片容量有限，需多个芯片组成完整存储器。访问某个字时，必须“选中”该字所在芯片，其他芯片不被“选中”。由芯片外的地址译码器及控制信号产生。
    *   **(6) 读写控制信号 (WE - Write Enable)**：根据CPU给出的读/写命令，控制被选中存储单元的读或写。

5.  **SRAM芯片读写周期** (如图4.7)
	  ![[image-153.png]]
    *   **读周期 (tRC)**：
        *   地址线先有效，进行地址译码。
        *   片选信号CS有效（低电平），WE信号为高（读）。
        *   经过tA（地址有效到数据输出时间）或tCO（CS有效到数据输出时间），数据在外部数据线上稳定出现。
        *   tOTD为片选信号无效后数据还能保持的时间。
        *   tA < tRC。
    *   **写周期 (tWC)**：
        *   CS和WE信号都应有效（低电平）。
        *   tW为写入时间，CS与WE同时有效的时间必须大于等于tW。
        *   地址有效后，须经过tAW时间，WE信号才能有效，否则可能写出错。
        *   WE无效后，须经过tWR时间地址才能改变，否则可能错误写入。
        *   写入数据须在WE和CS无效之前tDW时间就送到数据线上。
        *   tDH为WE无效后数据还要保持的时间。
        *   tW < tWC。

**4.2.3 动态RAM芯片 (DRAM)**
     ![[image-154.png]]
1.  **DRAM芯片结构** (如图4.8，典型的4M x 4位DRAM芯片)
    *   **特点**：容量较大，地址位数多。
    *   **地址引脚复用**：为减少芯片地址引脚数、减小体积，行地址和列地址通过相同的管脚分先后两次输入。
    *   **引脚示例**：A₀~A₁₀ (11根地址线)，在行选通信号RAS和列选通信号CAS控制下分时传送行、列地址。D₁~D₄ (4根数据线)。WE为读写控制。OE为输出使能。
    *   **内部逻辑**：存储阵列采用三维结构（如2048x2048x4位）。行、列地址各11位。行地址缓冲器和刷新计数器通过多路选择器将行地址输出到行译码器。刷新计数器位数也是11位。
2.  **DRAM芯片读写周期** (如图4.9)
	![[image-155.png]]
    *   **读周期**：
        1.  行地址必须在RAS信号有效之前送到芯片地址输入端。
        2.  CAS信号应滞后RAS一段时间，并滞后列地址送到芯片地址输入端的时间。
        3.  RAS、CAS的时延分别为tRAS和tCAS，它们应有足够的宽度。
        4.  WE信号为高电平，并在CAS有效之前建立。
        5.  每次读后要再生（重新写入一次）。
    *   **写周期**：
        *   RAS与CAS之间关系以及与地址信息间关系和读周期相同。
        *   不同点：
            1.  WE信号为低电平，并在CAS信号有效之前建立。
            2.  写数据必须在CAS有效之前出现在Din端。
3.  **DRAM芯片的刷新**
    *   **原因**：DRAM存储阵列中所有存储电容必须周期性地重新充电。
    *   **方法**：“读出”内容对相应单元进行“重写”（读后再生）。
    *   **操作**：刷新时只给各芯片送行地址和RAS信号，芯片中一行的所有元素被选中并进行“读出”操作。刷新按行进行，一次可刷新一行所有元素。
    *   **内部刷新**：刷新不需要外部提供行地址信息，DRAM芯片内部有行地址生成器（刷新计数器）自动生成行地址。刷新针对一行中所有存储元，无须列寻址。
    *   **刷新周期**：从上次对整个存储器刷新结束开始到下次对整个存储器全部刷新一遍为止的时间间隔，也就是相邻两次对某个特定行进行刷新的时间间隔。公认标准是电容数据有效保存期上限64ms。
    *   **刷新方式**：
        *   **(1) 集中刷新**：整个刷新间隔内，前一段时间正常读写，后一段时间停止读写，集中逐行刷新。刷新时整个存储器不能正常工作，影响系统效率，很少采用。
        *   **(2) 分散刷新**：将一个存储周期分为两段，前段正常读写，后段刷新。不存在“死区”，但每个存储周期加长，也很少使用。
        *   **(3) 异步刷新**：结合前两种方式，将一个刷新周期分配给所有行，使得在一个刷新周期内每一行都至少被刷新一次，且仅被刷新一次。若刷新周期为64ms，对于4096行DRAM，相邻两行刷新间隔为64ms/4096行 ≈ 15.625µs。效率高，目前用得较多。

4.  **SDRAM芯片技术**
    *   **基础**：目前主存常用的内存条基于SDRAM (Synchronous DRAM) 芯片技术，包括DDR SDRAM, DDR2 SDRAM, DDR3 SDRAM等。
    *   **与传统DRAM区别**：
        *   传统DRAM：与CPU异步交换数据，CPU发出地址和控制信号后，需等待数据。
        *   SDRAM：读写受系统时钟控制，与CPU同步交换数据。锁存CPU发出的地址和控制信息，经过确定时钟周期后给出响应，此间CPU可做其他操作。
    *   **特性**：
        *   **同步操作**：每步操作在外部系统时钟CLK控制下进行。
        *   **突发传输 (Burst Transfer)**：第一次存取时给出首地址，以后按地址顺序读写，不需重复地址建立时间和行列预充电时间，能连续快速从行缓冲器输出数据。
        *   **模式寄存器**：设置传送数据长度（突发长度，Burst Lengths, BL）和从收到读命令到开始传送数据的延迟时间（CAS潜伏期，CAS Latency, CL）。
    *   **工作过程（基于SDRAM技术）**：
        1.  CLK时钟上升沿，片选信号CS和行地址选通信号RAS有效。
        2.  经过tRCD (RAS to CAS Delay) 延时，列选通信号CAS有效，行、列地址被确定，选中具体存储单元。
        3.  **读操作**：再经过一个CAS潜伏期CL后，输出数据开始有效，其后的每个时钟都有一个或多个数据连续从总线上传出，直到完成BL指定的传送。
        4.  **写操作**：没有CL延时而直接开始写入。
    *   **CL (Read Latency, RL)**：tRCD和CL都以时钟周期TCK为单位。例如PC100 SDRAM，TCK=10ns，CL为2时，CAS潜伏期延时为20ns。BL可选1,2,4,8等，BL=1时为非突发。
    *   **DDR (Double Data Rate) SDRAM**：
        *   改进设计，芯片内部读写缓冲数据两位预取。
        *   利用存储器总线上时钟信号的上升沿与下降沿进行两次传送，实现一个时钟内传送两次数据。
        *   类似技术：DDR2（4个数据/时钟），DDR3（8个数据/时钟）。