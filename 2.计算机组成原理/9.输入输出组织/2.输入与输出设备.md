好的，这是关于 9.2 输入设备和输出设备 的学习笔记：

---

**9.2 输入设备和输出设备**

最常用的输入设备是键盘与鼠标，相对而言它们比较简单。最常用的输出设备是打印机与显示器。

**\*9.2.1 键盘**

键盘是计算机不可缺少的最常用的输入设备，用户通过键盘可向计算机输入字母、数字和符号。

*   **组成：** 外壳、按键和电路板三部分组成。
*   **按键结构：**
    *   **触点式按键：** 借助触点开关的接通或断开，来产生电信号。
    *   **非触点式开关：** 利用电压、电流或电磁场的变化产生输出信号。（计算机中基本上使用后一类开关）
*   **电路板：** 键盘控制逻辑，由一些逻辑电路或单片机组成，键盘上每个按键发出的信号由电路板转换为二进制代码，然后通过键盘接口送入计算机中。
*   **按键排列与扫描：**
	* ![[image-307.png]]
    *   按键排列是一个m×n的二维阵列，每个按键对应该阵列中的一个位置。
    *   键盘采用“按列扫描、接地检查”的方式进行工作。
    *   过程：键盘电路板内的单片机每隔3~5ms对按键矩阵的各列进行顺序扫描，被扫描列接0电平“地”，其他列接高电平。若此时被扫描的列中正好有某个键被按下，则相应的行和列被接通，因而按键所在行输出变低电平，其他行输出为高电平。此时，单片机可根据扫描的列号和输出为0电平的行号得到按键的位置，位置信息称为按键的“扫描码”或“位置码”。
*   **键盘分类（按输入主机信息不同）：**
    *   **编码键盘：** 键盘电路板中有一个编码器，能将单片机得到的位置码转换成相应的ASCII码送入主机。编码器由硬件构成，因此键盘响应速度快，但键盘控制电路的结构要复杂一些。
    *   **非编码键盘：** 键盘送到主机的信息是位置码，由键盘中断服务程序完成将位置码转换成ASCII码。这种键盘控制电路较简单，当然速度会慢一些。但是，由于主机速度远比人按键速度快，且这种键盘上某些键的功能可以通过软件来重定义，使用灵活，因此，目前PC大多用这种键盘。
*   **键盘中单片机的功能：** 除了完成按键扫描和生成扫描码的功能之外，还将扫描码转换成串行形式发送给主机，并具有消除抖动、扫描码缓冲和自动重复等功能。
*   **数据传输与处理：**
    *   键盘发出的串行数据由1位起始位、8位数据位、1位奇偶校验位和1位停止位组成。
    *   主机的键盘控制电路接收到这些串行数据后，去掉起始位、校验位和停止位，将8位数据通过串-并转换，形成并行数据送入缓冲寄存器，然后向CPU发出键盘中断请求。
    *   CPU响应中断后，由键盘中断服务程序把扫描码转换成ASCII码，然后送入主存中的键盘数据缓冲区。
*   **非西文字符输入：** 键盘上也可输入如汉字等非西文字符，这由各种汉字输入法自行定义。键盘位置码送入计算机后，经过汉字输入软件的处理，转换成该汉字对应的内码，再进行显示、存储等其他操作。
*   **键盘接口：** AT接口（大五芯接口）、PS/2接口（小五芯接口）和USB接口三种。较早的机器采用AT接口，现在台式机大多用PS/2接口或USB接口。USB接口支持即插即用，因而使用方便，比较受欢迎。

**\*9.2.2 鼠标器**

鼠标器(mouse)是一种相对定位设备。它能方便地控制屏幕上的光标移动到指定的位置，并通过按键完成各种操作。

*   **分类（按传感器技术）：**
    *   **机械式鼠标器：**
        *   底部有一个圆球，鼠标移动时，圆球滚动带动与球相连的圆盘。
        *   圆盘上的编码器把运动方向与距离送给主机，经软件处理，控制光标作相应移动。
        *   优点：简单，使用方便。
        *   缺点：容易磨损，且精度差。
    *   **光电式鼠标器：**
        *   几乎没有任何机械零件，而是使用一个微型光学镜头不断地拍摄鼠标下方的图像，数字信号处理器(DSP)对获取的图像序列中帧与帧之间的变化进行分析，计算出移动方向和距离，送入计算机，控制光标的移动。
        *   优点：速度快，精度高，没有机械磨损，使用寿命长，不需鼠标垫，只要在平面上就能操作。
        *   是目前比较流行的鼠标器类型。
*   **技术指标：**
    *   **分辨率 (dpi - dots per inch)：** 指鼠标在桌上每移动一英寸，光标在屏幕上所移动的像素数。分辨率越高，越有利于用户的细微操作。
    *   **帧速率 (刷新频率 - 针对光电鼠标)：** 指DSP每秒钟可以处理的图像帧数。
*   **接口：** 主要有USB或PS/2接口。早期的个人计算机把鼠标器接在串行通信口COM1或COM2上，目前已很少这样使用了。

**\*9.2.3 打印机**

打印机是计算机系统中最基本的输出设备。目前使用的打印机主要有针式打印机、激光打印机和喷墨打印机三种。

1.  **针式打印机 (击打式打印机)**
    *   **原理：** 以机械力量击打字锤从而使字模隔着色带在纸上打印出字来。
    *   **分类 (按字锤或字模构成方式)：**
        *   **整字形击打设备：** 利用完整字形的字模每击打一次印出一完整字形。
            *   优点：印字美观自然，可同时复印数份。
            *   缺点：噪音大，印字速率低，字符种类少，无法打印汉字或图形，且易磨损。目前已很少使用。
        *   **点阵式击打设备 (针式打印机)：** 利用打印头中的多根印针经色带在纸上打印出点阵字符的印字设备。目前有7针、9针、24针或48针的印字头。
            *   优点：相对于整字型击打设备，其机械结构简单，印字速度快，噪声小，成本低。
            *   应用：目前在银行、证券等行业的票据打印中广泛使用。
    *   **点阵打印机原理 (串行打印机为例)：**
        *   假定是24针打印机，即一列印针为24根，其印字头上有一列0.2~0.3mm直径的印针及其驱动电磁铁，印字头自左至右按点距移动。
        *   驱动印针的电磁铁受字符点阵内容的控制：有点的地方即打印，无点的地方不打印。
        *   每完成一列打印，印字头右移一个点距。如此一列一列地打印，直到一行打印结束，打印机走纸一行的距离，印字头再返回起始位置重新开始打印。
        *   其输出数据与一列印针之间的对应关系如图9.2所示。打印驱动程序从主存读出输出点阵数据到打印缓存中。每读出三个字节，对应24针的一列打印数据。打印数据在打印缓存中是按列存放的，因此，在送数据到打印缓存之前，需要将打印字符的字模点阵数据进行行和列的转换。
    *   **打印控制器/适配器组成：**
        *   **数据锁存器：** 暂存CPU送来的打印数据。
        *   **命令译码器：** 对CPU送来的命令进行译码，产生打印控制器内部使用的几个命令。
        *   **控制锁存器：** 锁存CPU送来的控制命令，如初始化、选通、自动走纸等。
        *   **状态锁存器：** 保存打印机送来的状态信息，如打印机忙、缺纸、联机、认可和出错等。
    *   **打印机与主机的连接 (图9.3)：** 打印控制器与CPU之间有数据线、地址线和中断请求信号INT等。打印控制器与打印机之间（如25芯并口）有8位数据线D0~D7，打印控制器送给打印机的初始化、选通、自动走纸等命令线以及打印机回送打印控制器的反映打印机目前状态的忙、缺纸、联机、出错、认可等信号线。
    *   **打印过程：** 打印机初始化主要是清除打印机缓冲和初始化打印机动作。CPU输出一个字符后，要判断打印机状态“忙”否。只有当打印机不忙时，CPU发送选通信号，才把打印数据真正送到打印机缓冲。当打印机缓冲中接收满一行数据后，CPU发回车或换行信号，打印机才真正完成打印动作。
    *   **不可打印字符 (控制字符)：**
        *   **特定动作字符：** 如回车(CR)、换行(LF)、删除(DEL)、响铃(BELL)等，其值可见ASCII码表。
        *   **ESC命令序列 (换码序列)：** 第一个字符固定为ESC，后跟一个或多个ASCII字符。打印机接收到完整命令序列后才完成规定控制功能。不同打印机命令序列格式可能不同，导致打印驱动程序不兼容。

2.  **激光打印机**
    *   **类型：** 非击打式印字机。
    *   **特点：** 印刷速度快、印字质量好、噪音低、分辨率高、印刷输出成本低，是目前应用最广泛的一种。
    *   **组成：** 打印机控制器和打印装置两部分。
        *   **打印机控制器：** 一般由功能较强的处理器、缓冲存储器以及相应的辅助电路构成。负责与主机的通信、解释主机送来的打印语言（包括打印机控制命令、页面格式命令、字体处理命令、图形命令等）、格式化打印内容（如纸张尺寸、边界设定、字符的大小与位置等）、光栅化处理（把经过格式化的页面数据转换成点阵数据）等，然后送打印装置进行输出。
        *   **彩色激光印字机：** 一般带有多种颜色的硒鼓（最典型的是C青、M品红、Y黄、K黑四种）。彩色印刷过程可先由处理器把彩色图像分解成C、M、Y、K四种单色的图像（称为“分色”过程），再由打印装置分四次套色印刷来完成。
    *   **打印语言：** 一组控制打印机工作的命令。
        *   **页面描述语言(PDL)：** 如Adobe公司的PostScript语言，有很强的图形、图像、文字和彩色处理功能，目前广泛应用于高档彩色激光印字机、激光照排机等。
        *   **Escape码语言 (PCL语言)：** 如HP公司的PCL语言。前面点阵打印机中的Esc命令序列实际上是一种低版本的PCL语言。PCL语言版本不断升级，其处理图形、图像、文字与彩色的功能日趋增强，且比PostScript简单、解释速度快，目前广泛安装在激光印字机、喷墨打印机等设备中。
    *   **喷墨打印机：** 也是一种非击打式打印机，它利用喷墨头喷射出可控的墨滴从而在打印纸上形成文字或图片，也是目前应用较多的一种打印输出设备。
    *   **接口：** 过去打印机与主机的接口主要是25芯的并行口，不支持即插即用，带电插拔时易损坏。现在大多数激光打印机和喷墨打印机都已经采用USB接口和主机连接，高速打印机也可以用SCSI接口和主机相连。

**\*9.2.4 显示器**

显示器是用来显示数字、字符、图形和图像的设备，它由显示器（也称监视器）和显示控制器组成，是计算机系统中最常用的输出设备之一。

*   **主要类型：** 阴极射线管(CRT)显示器以及目前流行的液晶平板(LCD)显示器。

1.  **CRT显示器**
    *   早期常用的显示器。
    *   **组成：** 阴极射线管(CRT)、亮度控制电路(控制栅)以及扫描偏转电路(水平/垂直扫描偏转线圈)等部件构成 (图9.4)。
    *   **原理：** 由热发射产生的电子流在真空中在几千伏高压影响下射向CRT前部，控制栅的电压决定有多少电子被允许通过，经过聚焦的电子束在水平与垂直偏转电路控制下射向屏幕，轰击涂有荧光粉的CRT屏幕，产生光点。通过对控制栅电压强弱的控制，达到控制光点有无的目的，从而形成显示图像。
    *   **光栅扫描：** 电子束在水平同步信号和垂直同步信号的控制下，在屏幕上按行优先的方式形成光点。从左向右进行行扫描，每扫描完一行，就进行一次水平行回扫，回到最左边，再进行下一行水平扫描，所有行扫描后形成一帧图像，然后进行垂直回扫，回到左上角，重复进行下一帧图像的扫描。
    *   **行频与帧频：** 水平扫描周期的倒数称为行频，垂直扫描周期的倒数称为帧频，也称刷新频率。
    *   **刷新频率与闪烁：** 为保证屏幕上显示的图像不产生闪烁，刷新频率必须达到50~70Hz，最好在75Hz以上。
    *   **参数示例：** 分辨率为640×480，刷新频率为50Hz时，且假定水平回扫期和垂直回扫期各占水平扫描周期和垂直扫描周期的20%，则：
        *   行频：480线 × 50帧/秒 ÷ 80% = 30kHz。
        *   水平扫描周期：1/30kHz = 33μs。
        *   每一像素的读出时间：33μs × 80% ÷ 640 = 41ns。
        *   若分辨率提高，帧频不变，则行频需提高，每像素读出时间减少，成本也随之上升。
    *   **扫描方式：** 逐行扫描与隔行扫描。
    *   **缺点：** 可能会因聚焦不准而造成图像模糊；体积大、能耗高。目前CRT显示器已经逐步为液晶显示器所取代。

2.  **液晶显示器(LCD)**
    *   **基本原理：** 基于液晶的物理特性：液晶通电时会改变其排列次序，从而影响光线的通过 (图9.5)。
        *   液晶面板包含两片偏振方向相互垂直的偏振光过滤片，中间夹着一层液晶。液晶层的两侧分别连接着一个带有精细开槽(透明电极)的玻璃基板，这两个基板上的槽互相垂直。
        *   液晶由长棒状的分子构成，将液晶倒入精细开槽平面后，液晶分子会顺槽排列。因此，两个基板之间的液晶分子在第一个上呈垂直排列而在第二个上呈水平排列；在两侧相互垂直排列的限制下，中间部分的液晶分子在自身电荷的作用下被逐步扭转排列成一个90°的螺旋。
        *   **未加电时 (图9.5(a))：** 光束从第一个垂直光偏振板进入后通过液晶层时，垂直偏振光将顺着液晶的螺旋被偏转90°成为水平偏振光，因此顺利通过第二个水平偏振光过滤片。
        *   **加电后 (图9.5(b))：** 液晶的两个透明电极上通电，在电场电荷的作用下，原来螺旋排列的液晶分子将重新排列成一致的方向，不再扭转原垂直偏振光的方向；垂直偏振光线到达第二个水平偏振光过滤片时，将受到阻挡而不能通过。
        *   调节电压的大小可以改变液晶偏转的角度，进而可以改变通过光线的旋转幅度，最终控制光线通过的亮度。
        *   也可以设计成加电时射出光线，不加电时被阻挡，但“加电将光线阻挡”的方案对常亮的屏幕更省电。
    *   **彩色显示：** 加上专门处理彩色显示的彩色滤光片。通常在彩色LCD面板中，每一个像素由3个液晶单元格构成，每一个单元格前分别有红(R)、绿(G)、蓝(B)彩色滤光片。
    *   **优点：** 每个液晶单元都是独立开关，不存在聚焦问题，图像非常清晰；不需要CRT那样的光栅扫描，因此也没有屏幕闪烁问题；体积小、耗电低、不闪烁等。
    *   **应用：** 广泛应用于便携式计算机、数码相机和电视机等设备。
    *   **缺点：** （早期）价格高、视角不广以及彩色显示不够鲜艳等。
    *   **工作模式：**
        *   **字符模式：** 显示存储器（显存、VRAM，也称刷新存储器）中存放的是字符的编码（ASCII码或汉字代码）及其属性（如加亮、闪烁等），其字形信息存放在字符发生器中。
        *   **图形模式：** 此时每一字符的点阵信息直接存储在显示存储器中，字符在屏幕上的显示位置可以定位到任意点。
    *   **颜色深度：** 每一个像素需要使用多个二进制位来表示。每个像素对应的二进制位数称为颜色深度。例如8bit可有256色，24bit可达16M种颜色（真彩色）。
    *   **显示控制器 (显卡)：** 在图形显示模式下，除了完成前述的基本功能外，还能实现画图功能。接收并实现CPU送来的画图命令，将结果写入显存；同时读出显存内容，经并/串变换和D/A转换后，将R、G、B三个不同的颜色控制信号送显示器，从而在屏幕上显示出彩色图形。
        *   **GPU (Graphics Processing Unit)：** 显卡的核心是绘图处理器。早期绘图功能都由CPU在内存中完成，然后将生成的图像位图从内存传送到显存中，加重CPU工作量且速度慢。目前显卡中的GPU专门用来进行绘图，有一组可高速执行的适用于图像和图形处理的指令（如数据块传送、基本图形绘制、区域填空、图案填空、图形缩放、颜色转换等）。采用专用处理器实现，图形操作速度快，大大减轻CPU负担。

---