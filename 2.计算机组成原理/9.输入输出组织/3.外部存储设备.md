好的，这是关于 9.3 外部存储设备 的学习笔记：

---

**9.3 外部存储设备**

**9.3.1 磁表面存储原理**

磁表面存储器包括磁鼓、磁带、磁盘和磁卡片等。目前，在计算机系统中以磁盘和磁带为主。磁表面存储器主要用作计算机存储系统中的辅存，它可以存储大量的程序和数据。

1.  **磁层和磁头**
    *   **磁层：** 存放信息的介质，由非矩形剩磁特性的导磁材料（如氧化铁、镍钴合金等）构成。将这种材料制成的磁胶涂敷或镀在载磁体上，其厚度通常为0.1~5μm，以记录信息。
    *   **载磁体：** 可以是金属合金（硬质载磁体）或者是塑料（软质载磁体）。
    *   **磁层材料特性要求：**
        *   **剩磁 (BR) 要大：** 才能有足够的抗干扰能力。
        *   **矫顽力 (HC) 要合适：** 才能使用较小的写电流。
        *   **磁层厚度要薄：** 才能提高记录密度。
        *   对生成磁层的工艺、机械性能等也有一定的要求。
    *   **磁头：** 实现“磁-电”和“电-磁”转换的元件。它是由高导磁率的软磁性材料做成铁芯，在铁芯上开有缝隙并绕有线圈。
        *   **写操作：** 当载磁体与磁头作相对运动时，若写磁头线圈通以磁化电流，则可将信息写到磁层上（使磁层上某一微小区域磁化）。
        *   **读操作：** 当读磁头通过磁层上某一磁化单位而形成磁通回路时，磁通的变化使线圈两端产生感应电势，形成读出信号。
    *   **磁头质量：** 不仅与铁芯的材料有关，而且与磁头加工工艺有关（如磁头中的缝隙形状和尺寸将直接影响记录密度和读出幅度）。
    *   **磁头分类：** 读磁头、写磁头和读写磁头。其铁芯上的线圈分别称为读线圈、写线圈和读写线圈。

2.  **磁表面存储器的读写过程**
    *   一般都使磁头固定，而磁层（载磁体）作高速回转或匀速直线运动。在这种相对运动中，通过磁头（其缝隙对准磁层）进行信息存取。
    *   **(1) 信息写入过程：**
        *   磁头写线圈中通以写电流脉冲，此电流在铁芯中生成磁场，其磁头缝隙处的磁场穿过磁层中一微小区域，使该区域磁层以一定方向被磁化，形成一个磁化单元。
        *   写电流脉冲消失后，磁层仍保持该方向的剩磁状态（+BR或-BR），利用这两种稳定的剩磁状态，可以表示二进制代码的0和1。
        *   一个磁化单元就是一个存储元，存储一位二进制信息。
        *   当磁层相对于磁头运动时，就可以连续写入一连串的二进制信息。
    *   **(2) 信息读出过程：**
        *   读出时，磁头与磁层同样作相对运动。
        *   当磁层中某一记录单元运动到磁头缝隙下面时，由于磁头铁芯是良好的导磁材料，磁化单元的磁力线很容易通过磁头而形成闭合磁通回路。
        *   由于磁头中的磁阻比其周围空气的磁阻小得多，便在磁头中产生较大的磁通变化，因而在读线圈的两端产生较大的感应电势E，经读出放大电路整形和放大后成为读出信号。
        *   由于不同极性的磁化单元在铁芯中的方向不同，因而形成的感应电势E的方向也不同，从而可区别读出的是0还是1（如图9.6所示）。
	        * ![[image-308.png]]

3.  **磁表面存储器的性能指标**
    *   **(1) 记录密度：**
        *   可用道密度和位密度来表示。
        *   **磁道：** 在磁层运动方向上被磁头扫过的轨迹。一个磁表面会有许多磁道。
        *   **道密度：** 在沿磁道分布方向上，单位长度内的磁道数目。常用单位为tpi（每英寸磁道数）和tpm（每毫米磁道数）。目前软磁盘的道密度约为40~150tpi，硬盘的道密度高得多。
        *   **位密度：** 在沿磁道方向上，单位长度内能存放的二进制信息的数目。常用单位为bpi（每英寸二进制位数）和bpm（每毫米二进制位数）。
        *   **磁盘盘面记录密度示意图 (图9.7)：**
	        * ![[image-309.png]]
            *   **低密度存储方式：** 所有磁道上的扇区数相同，所以每个磁道上的位数相同，因而内道上的位密度比外道位密度高。
            *   **高密度存储方式：** 每个磁道上的位密度相同，所以外道上的扇区数比内道上扇区数多，因而整个磁盘的容量比低密度盘高得多。
    *   **(2) 存储容量：**
        *   指整个存储器所能存放的二进制信息量。它与磁表面大小和记录密度密切相关。
    *   **(3) 平均存取时间 (average access time)：**
        *   磁表面存储器的读写是在磁层相对磁头作匀速运动的过程中完成的。由于主机对存储器读写数据的随机性，很难保证磁层上所需要读写的数据块位置正好处于磁头下方。因此，存取时间应包括磁头定位和数据传输等多个部分的时间。
        *   **以磁盘为例：** 磁头定位过程包括寻道和旋转等待两个阶段。
            *   **寻道时间 (seek time)：** 指磁头从读写前原有的位置移到指定读写的磁道上所花费的时间。
            *   **旋转等待时间 (rotational latency)：** 指磁头进入指定磁道后，该磁道上被存取的信息段正好旋转到磁头下方所需的时间。
        *   **磁带的定位时间：** 与走带速度和带长有关，磁带愈长，带速愈慢，其平均时间愈长。
    *   **(4) 数据传输速率：**
        *   指磁表面存储器完成磁头定位和旋转等待以后，单位时间内从存储介质上读出或写入的二进制信息量。
        *   **内部传输速率 (internal transfer rate) / 持续传输速率 (sustained transfer rate)：**
        *   **外部传输速率 (external transfer rate) / 突发数据传输速率 (burst data transfer rate) / 接口传输速率：** 指主机中的外设控制接口从(向)外存储器的缓存读出(写入)数据的速度，由外设采用的接口类型决定。

4.  **数据记录方式**
    *   指将数字信息转换成磁层表面的磁化单元所采用的各种方式。由于磁化过程是通过在磁头中通以磁化电流来实现的，故记录方式取决于写电流波形的组合方式。记录方式的选取将直接影响到记录密度、存储容量、传送速率以及读写的控制逻辑。
    *   按照写信息所施加的电流波形的极性、频率和相位的不同，分为归零制、不归零制、调相制和调频制等。
    *   **(1) 归零制 (RZ制)：**
        *   写“1”用正脉冲，写“0”用负脉冲，一位信息写完后，电流总回归到零。这种记录方式又叫双向归零制或典型归零制。
        *   磁化单元的剩磁方向在存“1”时为+Br，存“0”时为-Br。
        *   **特点 (图9.8)：**
	        * ![[image-310.png]]
            *   写入前先退磁，两个信息位之间有未磁化的间隙 (B=0)，记录密度较低。
            *   每个位单元有两个读出波形，具有自同步能力（即能从本磁道读出的信息脉冲序列中提取出选通时钟信号，而无须增加附加的同步磁道）。
    *   **(2) 不归零-1制 (NRZ-1制)：**
        *   写电流只在写“1”时改变方向，写“0”时写电流不变，所以又称作“见1就翻”不归零制。
        *   **特点 (图9.9)：**
	        * ![[image-311.png]]
            *   各信息位间无“间隙”，记录密度较高。
            *   存“1”才能读出信号，存“0”无读出信号，故无自同步能力。
            *   由于电流不回到零，功耗较大。
    *   **(3) 调相制 (PM制)：**
        *   利用写电流的相位不同实现写“1”和写“0”的一种记录方式。写“0”时，写电流先正后负；写“1”时，写电流是先负后正。
        *   **特点 (图9.10)：**
	        * ![[image-312.png]]
            *   无论写“1”还是写“0”，在一个位信息期间，写电流相位至少有一次改变。
            *   因此，它和下面要叙述的调频制有类同性，利用记录信号变向，可生成读同步脉冲。
    *   **(4) 调频制 (FM制)：**
        *   写入“0”和“1”时磁头所加的写电流的频率不同。
        *   **特点 (图9.11)：**
	        * ![[image-313.png]]
            *   每记录一个代码时，在两个信息位的交界处，写电流一定改变方向。
            *   写“1”时，写电流的频率比写“0”时的频率高一倍。
            *   有自同步能力。
    *   **(5) 改进调频制 (MFM制)：**
        *   与调频制的区别在于去掉了FM制中的冗余信息。
        *   **特点 (图9.12)：**
	        * ![[image-314.png]]
            *   写电流不是在每个位周期的起始处都翻转，而只有连续记录两个或两个以上“0”时，才在位周期的起始处翻转一次。
            *   逢1在位中央翻转一次。
            *   这样，仍保持了自同步能力，记录密度又得到了提高，故又称倍密度记录方式，在磁盘中得到广泛应用。

**9.3.2 硬盘存储器**

硬盘存储器具有记录密度高、容量大、速度快等优点，是目前计算机存储系统中使用最普遍的一种外部存储器。

*   **类型：** 软盘因携带方便、价格便宜而曾经被广泛使用，但近年来由于U盘的出现，使得软盘逐步被容量大、使用和携带更方便的U盘所淘汰。
*   **主要介绍：** 硬磁盘存储器、U盘和移动硬盘、固态硬盘三类。

1.  **硬磁盘存储器**
	1. ![[image-315.png]]
    *   **逻辑结构 (图9.13)：** 主要由磁记录介质、磁盘驱动器、磁盘控制器三大部分组成。
        *   **磁盘控制器：** 包括控制逻辑、时序电路、“并→串”转换和“串→并”转换电路。
        *   **磁盘驱动器：** 包括读写电路、读写开关、读写磁头与磁头定位伺服系统。
    *   **(1) 硬磁盘驱动器**
        *   **物理组成 (图9.14(a))：** 主要由1~5张硬盘片、主轴、主轴电机、移动臂、磁头和控制电路等部分组成，通过接口与磁盘控制器连接。每个盘片的两个面上各有一个磁头，因此，磁头号就是盘面号。
	        * ![[image-316.png]]
        *   **磁道 (track)：** 磁头和盘片相对运动形成的圆。磁头位于不同的半径上，则得到不同的磁道。
        *   **柱面 (cylinder)：** 多个盘片上相同磁道形成一个柱面。所以，磁道号就是柱面号。
        *   信息存储在盘面的磁道上。在读写磁盘时，总是写完一个柱面上所有的磁道后，再移到下一个柱面。磁道从外向里编址，最外面的为磁道0。
        *   **扇区 (sector)：** 每个磁道又分为若干扇区，按扇区为单位进行磁盘读写。
        *   **内部逻辑 (图9.14(b))：** 磁盘读写是指根据主机访问控制字中的盘地址（柱面号、磁头号、扇区号）读写目标磁道中的指定扇区。
	        * ![[image-317.png]]
        *   **操作归纳：** 寻道、旋转等待和读写三大类。
            *   **寻道操作：** 磁盘控制器把盘地址送到盘驱动器的磁盘地址寄存器后，便产生寻道命令，启动磁头定位伺服系统进行磁头定位操作。此操作完成后，发出寻道结束信号给磁盘控制器，并转入旋转等待操作。
            *   **旋转等待操作：** 盘片旋转时，索引标志产生的脉冲将扇区计数器清零，以后每来一个扇区标志，扇区计数加1，把计数内容与磁盘地址寄存器中的扇区地址进行比较，如果一致，则输出扇区符合信号，说明要读写的信息已经转到磁头下方。
            *   **读写操作：** 扇区符合信号送给控制器后，控制器的读写控制电路开始动作。如果是写操作，就将数据送到写入电路，写入电路根据记录方式生成相应的写电流脉冲；如果是读操作，则由读出放大电路读出内容送磁盘控制器。
    *   **(2) 硬磁盘控制器**
        *   是主机与硬磁盘驱动器之间的接口。磁盘存储器是高速外设，所以磁盘控制器和主机之间采用成批数据交换方式。
        *   **主机与磁盘控制器数据交换的控制逻辑 (图9.15)：** 磁盘上的数据由读磁头读出后送到读出放大器，然后进行数据与时钟的分离，再进行串/并数据转换和格式变换送到数据缓冲器，经DMA控制将数据传送到主存储器。
	        * ![[image-318.png]]
        *   **控制器与驱动器接口界线：**
            *   **A点 (如ST506)：** 驱动器只完成读写和放大，数据分离后的控制逻辑都划入磁盘控制器。
            *   **B点 (如ESDI)：** 驱动器中包含数据分离电路，而磁盘控制器仅有串/并数据转换和格式变换等逻辑。
            *   **C点 (如SCSI)：** 全部控制功能均在驱动器内，主机与盘驱动器之间采用标准的通用接口。
    *   **(3) 磁盘的记录格式**
        *   数据在磁盘上的记录格式分定长记录格式和不定长记录格式两种。目前大多采用定长记录格式。
        *   **温切斯特磁盘的磁道格式 (图9.16)：** 采用定长记录格式。最早的硬磁盘由IBM公司开发，称为温切斯特(Winchester，地名)盘，简称温盘，它是几乎所有现代硬盘产品的原型。
	        * ![[image-319.png]]
            *   **扇区组成：** 每个磁道由若干个扇区（也称扇段）组成，每个扇区记录一个数据块。每个扇区由头空、ID域、间隙、数据域和尾空组成。
                *   **头空：** 占17个字节，不记录数据，用全1表示，磁盘转过该区域的时间是留给磁盘控制器作准备用的。
                *   **ID域：** 由同步字节、磁道号、磁头号、扇区号和相应的CRC码组成，同步字节标志ID域的开始。
                *   **数据域：** 占515个字节，由同步字节、数据和相应的CRC码组成，其中真正的数据区占512字节。
                *   **尾空：** 是在数据块的CRC码后的区域，占20个字节，也用全1表示。
    *   **(4) 硬磁盘的主要技术指标**
        *   **未格式化容量：** 指按道密度和位密度计算出来的容量，它包括了头空、ID域、CRC码等信息，是可利用的所有磁化单元的总数，比格式化后的实际容量要大。
        *   **低密度存储方式的未格式化容量计算：** 磁盘总容量 = 记录面数 × 理论柱面数 × 内圆周长 × 位密度。
            *   理论柱面数 ≈ (有效记录区外径 - 有效记录区内径) ÷ 2 × 道密度。
            *   内圆磁道的记录密度最大，一个磁道能记录的二进制信息位的理论值应等于内圆周长 × 位密度。
        *   **格式化后的实际容量 (数据总容量)：** 只包含数据区。磁盘实际数据容量 = 2 × 盘片数 × 磁道数/面 × 扇区数/磁道 × 512B/扇区 (新标准为4KB/扇区)。
        *   **数据传输率：** 单位时间内从磁盘盘面上读出或写入的二进制信息量。数据传输率 = 每分钟转速 ÷ 60 × 内圆周长 × 位密度。
        *   **磁盘响应读写请求的过程：** 读写请求排队 → 控制器解析请求命令 → 寻道 → 旋转等待 → 读写数据。
        *   **总响应时间：** 排队延迟 + 控制器时间 + 寻道时间 + 旋转等待时间 + 数据传输时间。
        *   **平均存取时间 (T)：** T = 寻道时间 + 旋转等待时间 + 数据传输时间。
            *   寻道时间一般为5~10ms。
            *   旋转等待时间取磁盘旋转一周所需时间的一半，大约4~6ms (如6000转/分时约为5ms)。
            *   数据传输时间 (一个扇区，约0.01ms/扇区) 相对较短。
            *   因此，磁盘平均存取时间通常近似等于平均寻道时间和平均等待时间之和。
        *   **接口类型：** 一般文件服务器使用SCSI接口，而普通的PC前些年多使用并行ATA(即IDE)接口，目前大多使用串行ATA(即SATA)接口。

\*2. **冗余磁盘阵列 (RAID - Redundant Arrays of Inexpensive Disk)**

*   **提出背景：** 改善磁盘存储器的性能，解决CPU和主存性能提高快于辅存的问题。
*   **基本思想：** 将多个独立操作的磁盘按某种方式组织成磁盘阵列，以增加容量；利用类似于主存中的多模块交叉技术，将数据存储在多个盘体上，通过使这些盘并行工作来提高数据传输速度；并用冗余磁盘技术来进行错误恢复以提高系统可靠性。
*   **RAID技术特性：**
    *   RAID由一组物理磁盘驱动器组成，在操作系统下它们被视为单个逻辑驱动器。
    *   数据分布在一组物理磁盘上，可以连续分布也可以交叉分布（按小条带或大数据块）。
    *   冗余磁盘用于存储校验信息，保证磁盘万一损坏时能恢复数据。
*   **RAID级别 (0~7级，及派生的RAID 10, RAID 30, RAID 50等)：**
    *   **(1) RAID 0 (条带化 - Striping)：**
        *   无冗余，数据分布在多个物理磁盘上。
        *   **优点：**
            *   **连续分布或大数据块交叉分布：** 若两个I/O请求访问不同盘上的数据，则两盘可并行传送，减少I/O排队时间，提高I/O响应能力 (适用于订票系统等)。
            *   **小条带交叉分布：** 一个I/O请求很可能占多个条带，并分布在不同的盘上，因而可并行传送同一个I/O请求的不同条带上的数据块，提高数据传输率 (适用于流媒体播放、图像处理、CAD系统等)。
    *   **(2) RAID 1 (镜像 - Mirroring)：**
        *   采用镜像盘实现一对一冗余。
        *   **特点：**
            *   读请求可由定位时间更少的磁盘提供数据。
            *   写请求对两个磁盘中相应信息并行更新，写性能由两次中较慢的一次决定。
            *   数据恢复简单，一个磁盘损坏，数据仍能从另一个磁盘中读取。
        *   可靠性高，但价格昂贵。常用于可靠性要求很高的场合。
    *   **(3) RAID 2 (海明码校验)：**
        *   用海明校验生成多个冗余校验盘，实现纠正一位错误、检测两位错误的功能。
        *   采用小条带交叉分布方式，数据传输率高，但I/O响应时间较长。
        *   冗余信息开销太大，价格较贵，已不再被使用。
    *   **(4) RAID 3 (奇偶校验)：**
        *   采用奇偶校验生成单个冗余盘。
        *   与RAID 2相同，也采用小条带交叉分布方式，数据传输率高，但I/O响应时间较长。
        *   损坏的数据可以通过其他磁盘重新生成： P(i) = X3(i)⊕X2(i)⊕X1(i)⊕X0(i)；若X0损坏，则 X0(i) = P(i)⊕X3(i)⊕X2(i)⊕X1(i)。
    *   **(5) RAID 4 (独立存取奇偶校验)：**
        *   与RAID 3一样，采用一个冗余盘存放奇偶校验位。
        *   采用大数据块交叉方式，每个磁盘的操作独立进行，多个小数据量的操作可以在多个磁盘上并行进行，具有较快的I/O响应时间 (适用于银行、证券等事务处理系统)。
        *   数据恢复方式与RAID 3相同。
        *   **写操作瓶颈：** 每次写都要对校验盘进行相应的校验数据更新，因而校验盘成为I/O瓶颈。
            *   **大量写：** 奇偶校验位可全部用新数据计算得到，直接写入奇偶校验盘和数据盘。
            *   **少量写 (写损失)：** 一次写操作包含两次读和两次写。例如，更新X0(i)为X'0(i)，则新校验位 P'(i) = X3(i)⊕X2(i)⊕X1(i)⊕X'0(i) = P(i)⊕X0(i)⊕X'0(i)。需先读P(i)和X0(i)，然后写X'0(i)和P'(i)。
    *   **(6) RAID 5 (分布式奇偶校验)：**
        *   与RAID 4组织方式类似，只是奇偶校验块分布在各个磁盘中，所有磁盘地位等价。
        *   提高了容错性，避免了使用专门校验盘时潜在的I/O瓶颈。
        *   采用独立存取技术和大数据块交叉分布方式，I/O请求的响应速度快。
        *   成本不高但效率高，被广泛使用。
    *   **(7) RAID 6 (双重奇偶校验)：**
        *   与RAID 4和RAID 5一样，采用独立存取技术和大数据块交叉分布方式。
        *   冗余信息分布在所有磁盘上，且采用双维块奇偶校验（如图9.17，P0代表第0条块的校验值，而PA代表数据块A的校验值）。
	        * ![[image-320.png]]
        *   容许双盘出错。可用于要求数据绝对不能出错的场合。
        *   控制器设计复杂，写入速度较慢（计算和验证校验值耗时）。
    *   **(8) RAID 7 (带Cache的磁盘阵列)：**
        *   在RAID 6的基础上，采用Cache技术使传输率和响应速度都有较大提高。
        *   Cache分块大小和磁盘阵列中数据分块大小相同，一一对应。
        *   有两个独立的Cache，双工运行。写入时数据同时分别写入两个独立的Cache，即使一个Cache故障，数据也不会丢失。写入磁盘阵列以前，先写入Cache中，然后同一磁道的信息在一次操作中完成；读出时，先从Cache中读出，若无则从RAID中读。
        *   结合了Cache和RAID技术，弥补RAID不足，提供高效、快速、大容量、高可靠性以及灵活方便的存储系统。

\*3. **U盘和移动硬盘**

*   **U盘 (闪存盘)：**
    *   采用Flash存储器（即闪存）做成，属于非易失性半导体存储器。
    *   沿用了EPROM的简单结构和浮栅/热电子注入的编程写入方式，又兼备EEPROM的可擦除特点，可在计算机内进行擦除和编程写入（快擦型电可擦除重编程ROM）。
    *   **特点：** 体积小、重量轻、容量比软盘和光盘大的多，具有保护功能，使用寿命可长达数年之久。
    *   **接口：** 利用USB接口，可以与几乎所有计算机连接。
*   **移动硬盘：**
    *   比U盘容量更大的用作计算机系统数据备份的移动设备。
    *   由微型硬盘配上特制的硬盘盒构成的一个大容量存储器。
    *   **接口：** 通过USB和IEEE 1394接口和计算机连接，可以随时插拔。
    *   **优点：** 容量大、兼容性好、速度快、体积小、重量轻、携带方便、安全可靠。

\*4. **固态硬盘 (SSD - Solid State Disk)**

*   也称为电子硬盘。
*   使用NAND闪存组成的外部存储系统，与U盘没有本质差别，只是容量更大，存取性能更好。
    *   用闪存颗粒代替磁盘作为存储介质，利用闪存的特点，以区块写入和抹除的方式进行数据的读取和写入。
    *   电信号的控制使得固态硬盘的内部传输速率远远高于常规硬盘。
    *   **性能提升：** Windows开机速度可提升至20秒以内。
*   **优点 (与常规硬盘相比)：**
    *   **抗震动好、安全性高：** 无电机、盘片、磁头等机械部分，无机械运动和震动，抗震性好，数据安全性高。
    *   **无噪音。**
    *   **能耗低：** 无需马达，能耗成倍降低，延长电池供电设备续航。
    *   **发热量低：** 无电机等机械部件，发热量大幅降低，延长其他配件使用寿命。
    *   **适应性高：** 工作温度范围宽 (-40℃~85℃)。
*   **发展与挑战：**
    *   早期读写性能各有上下，价格较高。
    *   目前读写性能基本超越常规硬盘，价格不断下降，有望逐步取代传统硬盘。
    *   **接口：** 与传统硬盘相同 (SATA, IDE)，外形尺寸也一致 (2.5英寸, 1.8英寸)。
    *   **容量：** 市场上32~256GB常见，已发表最大容量达1TB。
    *   **性能：** 平均访问时间约常规硬盘的1/5 (应为更快，此处原文为1.5倍，疑为笔误或早期情况)，写入速度可达常规硬盘1.5倍，读取速度可达2~3倍；CPU占用率可比常规硬盘下降5~10倍。
    *   **主要问题：** 使用寿命（闪存擦写次数有限，频繁擦写会降低写入寿命）和价格（仍远高于常规硬盘）。随着技术进步，写入寿命会提高，价格也会下降。

**\*9.3.3 磁带存储器**

磁带存储器可用作海量数据备份存储设备。

*   **种类：**
    *   按带宽：1/4英寸和1/2英寸。
    *   按带长：2400英尺、1200英尺和600英尺等。
    *   按外形：开盘式和盒式磁带。
    *   按记录密度：800位/英寸、1600位/英寸、6250位/英寸等。
    *   按带面并行磁道数：9道、16道等。
*   **计算机常用：** 1/2英寸开盘式磁带和1/4英寸盒式磁带。
*   **磁带机种类：**
    *   按走带速度：高速、中速和低速磁带机。
    *   按磁带机规模：标准1/2英寸磁带机、盘式磁带机和海量宽磁带机三种。
    *   按磁带记录格式：启停式和数据流式。
*   **操作：** 寻找记录区需驱动磁带正走或反走，读写完毕后使磁头停在两个记录区之间。要求磁带机在结构上和电路上采取相应措施，保证磁带以一定的速度平稳地运动和快速启停。

1.  **开盘式启停磁带机**
    *   磁带缠绕在圆形带盘上，磁带首端可以取出，磁带上的信息以数据块为单位。在数据块之间，磁带机需要启动和停止。
    *   **组成：** 主要由走带机构、磁带缓冲机构、带盘驱动机构和磁头等部分组成。
        *   **走带机构：** 带动磁带运动。
        *   **磁带缓冲机构：** 减小磁带运动中的惯性，以便快速启停。
        *   **带盘驱动机构：** 控制带盘电机的方向和速度，使放带盘和收带盘都能正转和反转，并且调节转速。
        *   **磁头：** 原理与磁盘机磁头相同，但磁带机将多个磁头组装在一起，构成组合磁头，以便同时对各道进行读写。
    *   **1/2英寸9道启停式磁带记录格式 (图9.18)：** 一种国际通用的标准磁带。
	    * ![[image-321.png]]
        *   **始端标记 (BOT) 和末端标记 (EOT)：** 用反光的金属薄膜制成，光电检测元件可检测到并产生相应电信号。
        *   **信息存储形式：**
            *   **文件形式：** 一盘磁带可记录若干个文件，一个文件又分若干个数据块 (B1, B2, ..., Bm)。每个文件的始末有文件头标和文件尾标（均为80B，内容随操作系统不同而不同）。文件头标和文件尾标后有3.75英寸的间隙G，数据块间有0.6英寸的间隙g。
            *   **数据块形式：** 磁带可在数据块之间启停。在9道带中，8个道是数据磁道，另一道是这8位数据的奇偶校验位。在每个数据块内部，每条磁道沿走带方向还有CRC校验码。

2.  **数据流磁带机**
    *   将数据连续地写在磁带上，在数据块之间插入记录间隙，磁带机在数据块之间不用启停。
    *   采用电子控制代替机械控制，简化了磁带机的机械结构，降低成本，提高可靠性。
    *   不是多位并行读写，而是和磁盘一样采用逐道串行读写方式，记录信息从0磁道开始，偶数道从BOT到EOT，而奇数道从EOT到BOT，依次首尾相接。记录格式与启停式磁带机不同。
    *   **种类：** 1/2英寸开盘式和1/4英寸盒式两种。
    *   **1/4英寸盒式数据流磁带记录格式 (图9.19 - 9磁道)：** 包括前同步、数据块标志(1B)、用户数据(512B)、地址(4B)、CRC校验码(2B)和后同步。
	    * ![[image-322.png]]

**\*9.3.4 光盘存储器**

光盘存储器是一种采用聚焦激光束在盘形介质上高密度地记录信息的存储装置。

*   **特点：** 记录密度高、存储容量大、信息保存寿命长、工作稳定可靠、环境要求低等。
*   **应用：** 广泛应用于存储各种数字化信息，包括大型数据处理系统和办公自动化系统中的文件、声音和图像的存档与检索等领域，是磁盘机的重要后援设备。

1.  **光盘存储器的基本工作原理**
    *   **(1) 只读型光盘的信息存储机理：**
        *   制作时先利用激光束，将经过编码和调制的数据信息螺旋状刻录在玻璃母盘上。
        *   后经显影、腐蚀，使曝光部分达到所需的深度，得到一张阳母盘。
        *   再在阳母盘上镀上一层厚的金属层，使它和阳盘分离，得到一张金属母盘（阴盘）。
        *   利用它来制作压膜，把压膜压在加热的聚碳酸酯盘上，后者的表面就会出现与金属母盘成镜像对称的小凹坑。这些凹坑就是录制的数据。
        *   凹坑的边缘处表示“1”，而凹坑内和凹坑外的平坦部分表示“0”。
        *   此过程与集成电路生产中使用的微缩照相技术非常相似，不同的是，要产生宽度大约0.6μm的凹坑所需的光点不仅尺寸要小，而且强度要高，为此必须采用激光作为光源，并采用良好的光学系统才能实现。
    *   **(2) 一次写入型光盘的信息存储机理：**
        *   本质上与只读型光盘一样。不同之处在于它增加了一层有机染料作为记录层，其调制激光束输出强度也要高得多。
        *   当写入激光束聚焦后，照在记录层上时，有机染料被加热后有一部分熔解掉，形成代表信息的凹坑。
        *   读出数据时，在高温激光束的照射下，熔解处与未熔解处的颜色和亮度不同，因而可以区分读出的是0还是1。

2.  **光盘上信息的记录格式**
    *   光盘上用于记录数据的是一条由里向外的连续的螺旋状光道 (图9.20(a))。
	    * ![[image-323.png]]
    *   信息按照一个个扇区串行记录在光道上，扇区是光盘最小可寻址单位。
    *   **定位方式：** 按时间方式来定位，扇区地址为分、秒、扇区号。
    *   **基本恒定线速度：** 每秒钟读75个扇区，所以每秒钟内扇区的编号为0~74。
    *   **CD-ROM光盘扇区记录格式 (图9.20(b))：** 每个扇区共2352个字节。
	    * ![[image-324.png]]
        *   12字节的同步字段。
        *   4字节的ID字段。
        *   2048字节的数据字段。
        *   288字节的校验码字段 (LECC - Layered ECC)。

3.  **光盘存储器的组成**
    *   由光盘片和光盘驱动器两个部分组成。
    *   **(1) 光盘片的分类**
        *   **基片：** 一种耐热的有机玻璃。
        *   **存储原理：** 与磁盘不同，它通过在盘面上压制凹坑来记录信息。
        *   **按所用激光类型分：**
            *   **CD盘片：** 激光波长780nm，光斑直径1.74μm，道间距1.6μm，凹坑宽度0.6μm，凹坑最小长度0.83μm。光道长度约5.3km。容量650MB。
            *   **DVD盘片：** 激光波长650nm，光斑直径1.08μm，道间距0.74μm，凹坑宽度0.4μm，凹坑最小长度0.4μm。光道长度约11.8km。有单层单面、单层双面、双层单面、双层双面4种类型。单层单面DVD容量达4.7GB。
            *   **蓝光(BD)盘片：** 利用波长更短(405nm)的蓝紫光激光进行信息读写。单层盘片容量为25GB，读写速度可达4.5~9MBps。
        *   **按读写类型分：**
            *   **只读型：** 由生产厂家预先用激光在盘片上蚀刻而成，信息不能改写。如激光视盘(LV)、数码唱盘(CD-DA)、计算机用的CD-ROM、DVD-ROM、BD-ROM等。
            *   **一次写入型 (追记型)：** 用户一次写入、可多次读出但不能擦除。要修改的数据只能追记在盘片上的空白处。用于不需要修改的应用场合。如CD-R、DVD-R、DVD+R、BD-R等。
            *   **可擦写型：** 可读可写，可以多次改写，擦写次数可达几百次甚至上千次之多。如CD-RW、DVD-RW、DVD+RW、BD-RW等。
    *   **(2) 光盘驱动器的分类 (光驱)**
        *   **组成：** 主轴驱动机构、定位机构、光头及有关的控制和驱动电路组成。光盘安装在主轴驱动机构的主轴上，由主轴电机直接驱动不断旋转。光头安装在直线电机带动的长行程定位机构上，可以对光盘上的任意光道进行信息存取。
        *   **按信息读写能力分：**
            *   **只读光驱。**
            *   **光盘刻录机。**
        *   **按可读写光盘片类型分：**
            *   CD只读光驱和CD刻录机。
            *   DVD只读光驱和DVD刻录机。
            *   DVD只读光驱和CD刻录机相结合的组合光驱 (“Combo”光驱)。
            *   蓝光光驱 (BD-ROM光驱) 和蓝光刻录机 (BD刻录机)。

---